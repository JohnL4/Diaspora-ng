<p>
</p>
<p>
  Cluster has {{Cluster.numSystems ? Cluster.numSystems : "no"}} systems.
</p>
<div class="row">

<!-- Using table puts a border between each row and there's not really any easy way around that.  So be it.  Maybe if I
      pull in Polymer (or something) it'll be better.
-->
<div class="col-md-6" style="/* border: 1px solid blue; */">

  <div class="table-responsive">
    <table class="table cluster-details" *ngIf="Cluster && Cluster.numSystems">
      <tr>
        <th>System</th>
        <th>Stats</th>
        <th>Aspects</th>
        <!-- <th>Connections</th> -->
        <th style="text-align: right;">
          <button type="button" class="btn btn-default" aria-label="Edit">
            <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
          </button>
        </th>
      </tr>
      <ng-container *ngFor="let sys of Cluster.systems">
        <ng-container *ngIf="sys.isBeingEdited"> <!-- =========================== edit mode ==================== -->
          <tr>
            <td><input [(ngModel)]="sys.name"/></td>
            <td>T{{sys.tech}} E{{sys.environment}} R{{sys.resources}}</td>
            <td>
              <input [(ngModel)]="sys.aspects[0]"/>
              <input [(ngModel)]="sys.aspects[1]"/>
              <input [(ngModel)]="sys.aspects[2]"/>
            </td>
            <!--
                <td>
                  <span *ngFor="let ss of sys.slipstreams">
                    {{ss.otherEndPoint( sys).name[0]}}
                  </span>
                </td>
                -->
            <td>
              <button type="button" class="btn btn-default" aria-label="Save" (click)="sys.toggleEdit()">
                <span class="glyphicon glyphicon-save" aria-hidden="true"></span>
              </button>
            </td>
          </tr>
          <tr>
            <td style="text-align: right; vertical-align: top"><label>Notes:</label></td>
            <td colspan="2">
              <textarea [(ngModel)]="sys.notes" rows="5" style="width: 100%"></textarea>
          </tr>
        </ng-container>
        <ng-container *ngIf="! sys.isBeingEdited"> <!-- ======================== read-only mode ======================= -->
          <tr>
            <td>{{sys.name}}</td>
            <td>T{{sys.tech}} E{{sys.environment}} R{{sys.resources}}</td>
            <!-- TODO: Need some fancy conditionals below to keep spurious semicolons from showing up. -->
            <td>{{sys.aspects[0]}}; {{sys.aspects[1]}}; {{sys.aspects[2]}}</td>
            <td style="text-align: right;">
              <button type="button" class="btn btn-default" aria-label="Edit" (click)="sys.toggleEdit()">
                <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
              </button>
            </td>
          </tr>
          <tr *ngIf="sys.notes">
            <td style="text-align: right; vertical-align: top;"><label>Notes:</label></td>
            <td colspan="3" style="vertical-align: top;">
              {{sys.notes}}
            </td>
          </tr>
        </ng-container>
      </ng-container>
    </table>
  </div>

</div>

<div class="col-md-6" >
  <div id="cytoscapeDiv" style="/* width: 100%; */ height: 75vh; border: 1px solid silver;" >
  </div>
</div>

</div>

<!--
<div class="row">
  <div class="col-sm-2"><label>System</label></div>
  <div class="col-sm-1"><label>Stats</label></div>
  <div class="col-sm-2"><label>Connections</label></div>
</div>
<ng-container *ngFor="let sys of Cluster.systems">
  <div class="row">
    <div class="col-sm-2"><input [(ngModel)]="sys.name"/></div>
    <div class="col-sm-1">T{{sys.tech}} E{{sys.environment}} R{{sys.resources}}</div>
    <div class="col-sm-2"><ng-container *ngFor="let ss of sys.slipstreams">{{ss.otherEndPoint( sys).name}},</ng-container></div>
  </div>
  <div class="row">
    <div class="col-sm-offset-1 col-sm-1">
      <label>Aspects:</label>
    </div>
    <div class="col-sm-10">
      <input/>
      <input/>
      <input/>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-offset-1 col-sm-1">
      <label>Notes:</label>
    </div>
    <div class="col-sm-10">
      <textarea rows="5" style="width: 100%"></textarea>
    </div>
  </div>
</ng-container>
-->
