<p></p>

<!-- Observable play -->
<!--
<div class="row">
  <div class="col-sm-1">Observables:</div>
  <div class="col-sm-11">
    {{_persistenceSvc.observableItem | async}}
<!--
    <ul>
      <li *ngFor="let item of _persistenceSvc.observableItems | async">{{item}}</li>
    </ul>
-->
<!--
  </div>
</div>

<p></p>
-->

<!-- More Observable play -->
<!--
<div class="row">
  <div class="col-sm-1">Clusters:</div>
  <div class="col-sm-11">
    <!-- <p>{{(_persistenceSvc.clusterNamesObservable | async)?.val()}}</p> -->
<!--
    <ul>
      <!-- When clusterNamesObservable is FromEventPatternObservable<{},{}>, the following fails with "cannot find
        differ supporting object" or some such. -->
<!--
      <li *ngFor="let clusterName of (_persistenceSvc.clusterNamesObservable | async)?.val()">{{clusterName}}</li>
    </ul>
  </div>
</div>
-->
<p></p>

<div class="row">
  <div class="col-sm-6">
    <p>You cannot access the database (for saving or saved clusters) unless you are logged in.</p>
  </div>
  <div class="col-sm-1">
    <p><button class="btn btn-default" type="button" (click)="login()">Login</button></p>
  </div>
  <div class="col-sm-5" *ngIf="user | async">
    <!-- Refreshed as a result of the fact that ClusterPersistenceService.user is a promise. -->
    <p>Currently logged in as {{(user | async).name}} (uid {{(user | async).uid}}).</p> 
  </div>
  <div class="col-sm-5" *ngIf="! (user | async)">
     <p>
        Currently not logged in.
        <a href="#" (click)="showDelayedObservableInfo()"><span class="glyphicon glyphicon-info-sign"></span></a>
     </p>
     <p *ngIf="delayedObservableInfoShowing">
        Sometimes, due to either a bug in Angular or RxJS or my incorrect usage of same, the UI doesn't properly update
        to show state that might be changing asynchronously (and logging in/out is actually done asynchronously, as is
        almost every operation requiring some network traffic).  In such cases, the application is in the correct state
        (unless there's yet another bug in my code; entirely possible) but the UI doesn't show it.  Some sort of UI-changing
        action will clear it up (for example, generating a new cluster, loading a cluster, saving a cluster, editing a cluster, etc.).
        You should be able to proceed normally.
     </p>
  </div>
</div>
<div class="row">
  <div class="col-sm-1 col-sm-offset-6">
    <p><button class="btn btn-default" type="button" (click)="logout()">Logout</button></p>
  </div>
</div>
<div class="row">
  <div class="col-sm-3">
    <p>Give the cluster a name and save it:</p>
  </div>
  <div class="col-sm-3">
    <p><input type="text" name="clusterName" [(ngModel)]="clusterName"/></p>
  </div>
  <div class="col-sm-1">
    <p><button class="btn btn-default" type="button" (click)="saveCluster()">Save</button></p>
  </div>
</div>

<!--
<div class="row">
  <div class="col-sm-3">
    <p>Some random UUID:</p>
  </div>
  <div class="col-sm-9">
    <p>{{uuid}}</p>
  </div>
</div>
-->